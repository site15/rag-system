## My telegram message #129714
**Time:** 30.10.2021 14:41:34 UTC+05:00
**Link:** https://t.me/nest_ru/129714

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Походу не для меня это, не понимаю все равно, особенно в разрезе чтения документации

Main message:
помечаешь класс декоратором Injectable и теперь ты этот класс можешь в модуль импортнуть в секцию providers:[...], если не помечать декоратором то тебе нужно руками докидывать через токен провайдер { provide: 'MY_CLASS_TOKEN', useClass: MyClass } вот и все что нужно знать

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

помечаешь класс декоратором Injectable и теперь ты этот класс можешь в модуль импортнуть в секцию providers:[...], если не помечать декоратором то тебе нужно руками докидывать через токен провайдер { provide: 'MY_CLASS_TOKEN', useClass: MyClass } вот и все что нужно знать

--

## My telegram message #129730
**Time:** 30.10.2021 14:57:23 UTC+05:00
**Link:** https://t.me/nest_ru/129730

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Я слышал, что репозиторий (который в ORM) - это именно коллекция. То есть транзакции там не юзают, запись в БД тоже. То есть это получается не совсем тот репозиторий, который является шаблоном проектирования
- Ну почему в тупорм есть кастом репозиторий глава, где ты можешь напрямую работать с бд
- Тебе надо записать в транзакции в 5 разных таблиц. В какой репозиторий ты это пихнёшь?
- Тут согласен, но обычно я опираюсь на связи между ними

Main message:
У тя много модулей может быть и они юзают сервисы друг друга и иногда какой-то модуль работает с монго а другой с пг третий с ФС, зачем им знать детали реализации и тайпинги левой херни, они просто импортят модуль и юзают сервис

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

У тя много модулей может быть и они юзают сервисы друг друга и иногда какой-то модуль работает с монго а другой с пг третий с ФС, зачем им знать детали реализации и тайпинги левой херни, они просто импортят модуль и юзают сервис

--

## My telegram message #129740
**Time:** 30.10.2021 17:09:21 UTC+05:00
**Link:** https://t.me/nest_ru/129740

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Через любое облако это можно сделать очень просто и удобно
- Ребят, кто-то запускал cluster на 16 ноде ? Чет у меня объект cluster undefined
- хз, давно на pm2 перешел  https://dev.to/acanimal/using-pm2-to-manage-nodejs-cluster-34-30ee
- Да я хочу просто понять в чем причина что это не работает. А так используется кубер сейчас. Заметил что этот косяк есть только при использований nrwl.  @KaufmanEndy - привет, ты не мог бы проверить у себя, если такое же поведение ?

Main message:
у меня нет такой либы

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

у меня нет такой либы

--

## My telegram message #129743
**Time:** 30.10.2021 17:15:05 UTC+05:00
**Link:** https://t.me/nest_ru/129743

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- хз, давно на pm2 перешел  https://dev.to/acanimal/using-pm2-to-manage-nodejs-cluster-34-30ee
- Да я хочу просто понять в чем причина что это не работает. А так используется кубер сейчас. Заметил что этот косяк есть только при использований nrwl.  @KaufmanEndy - привет, ты не мог бы проверить у себя, если такое же поведение ?
- у меня нет такой либы
- В смысле нету ? У тебя же nx монорепа

Main message:
че за кластер

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

че за кластер

--

## My telegram message #129745
**Time:** 30.10.2021 17:16:05 UTC+05:00
**Link:** https://t.me/nest_ru/129745

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- у меня нет такой либы
- В смысле нету ? У тебя же nx монорепа
- че за кластер
- cluster который от ноды

Main message:
не юзал)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

не юзал)

--

## My telegram message #129748
**Time:** 30.10.2021 19:40:12 UTC+05:00
**Link:** https://t.me/nest_ru/129748

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- cluster который от ноды

Main message:
на 13.1.2 нкс не пашет билд в сиай, ща пробую откатится на 12.10.0, может как то связано

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

на 13.1.2 нкс не пашет билд в сиай, ща пробую откатится на 12.10.0, может как то связано

--

## My telegram message #129750
**Time:** 30.10.2021 19:42:33 UTC+05:00
**Link:** https://t.me/nest_ru/129750

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- cluster который от ноды
- не юзал)
- на 13.1.2 нкс не пашет билд в сиай, ща пробую откатится на 12.10.0, может как то связано
- Кто апнулся до 17й версии? У вас были проблемы с совместимостью? Либо же это... Касается апа только для  @nestjs /core и common

Main message:
я ща пытаюсь с 14 на 16 переехать тока)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

я ща пытаюсь с 14 на 16 переехать тока)

--

## My telegram message #129757
**Time:** 30.10.2021 20:15:43 UTC+05:00
**Link:** https://t.me/nest_ru/129757

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
Ну я сразу и нкс и ноду думал апнуть, с нкс не вышло, нода билд прошёл ща докеры и деплой идут пока норм

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Ну я сразу и нкс и ноду думал апнуть, с нкс не вышло, нода билд прошёл ща докеры и деплой идут пока норм

--

## My telegram message #129773
**Time:** 31.10.2021 00:01:53 UTC+05:00
**Link:** https://t.me/nest_ru/129773

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
на крайняк можно ссылку скопировать а не пересылать сообщение  https://t.me/nest_ru/129758

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

на крайняк можно ссылку скопировать а не пересылать сообщение  https://t.me/nest_ru/129758

--

## My telegram message #129778
**Time:** 31.10.2021 00:07:01 UTC+05:00
**Link:** https://t.me/nest_ru/129778

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- А что если прилетает:  exit status 5: символы ?

Main message:
я через доккер стартую дев режим проекта, и разные проекты свой докер композ имеют, не переключаю версии ноды никогда, не знаю на сколько это правильно, но мне норм

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

я через доккер стартую дев режим проекта, и разные проекты свой докер композ имеют, не переключаю версии ноды никогда, не знаю на сколько это правильно, но мне норм

--

## My telegram message #129786
**Time:** 31.10.2021 00:44:05 UTC+05:00
**Link:** https://t.me/nest_ru/129786

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
) было-бы круто если это было бы правдой

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

) было-бы круто если это было бы правдой

--

## My telegram message #129794
**Time:** 31.10.2021 13:13:37 UTC+05:00
**Link:** https://t.me/nest_ru/129794

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Так они там поменяли чутка настройки для билдов. Я вчера с утра занимался этим, весь проект перевел на последний версий пакетов.

Main message:
У меня локально норм билдится, в сиай не норм а так как ранер шаредеый, хз че там не так, проще откатится было

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

У меня локально норм билдится, в сиай не норм а так как ранер шаредеый, хз че там не так, проще откатится было

--

## My telegram message #129801
**Time:** 31.10.2021 14:18:04 UTC+05:00
**Link:** https://t.me/nest_ru/129801

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Подскажите пожалуйста, как сохранить данные при связи многое ко многому. Использую NestJs/crud. Есть таблица с файлами, есть таблица с товарами. У товаров есть изображения. Нужно указать для товара список изображений используя nestjs/crud.
- Guys, всем привет ❤️, возможно дэбильный вопрос, но что-то я почистил и в итоге:  Имя "node" не распознано как имя командлета, функции, файла сценария или выполняемой программы. Проверьте правильность написания имени, а также наличие и правильность пути, после чего повторите попытку. строка:1 знак:1  ), как я могу поставить системную переменную node занести заново? Говорю заранее - дисплей русский
- Всем привет Поделитесь, пожалуйста, как вы организовываете работу с media. Использую multer. Но, дабы иметь возможность сохранять 1. Оригинальное название 2. Хешированное название (дабы при загрузке одинаковых медиа они не затерялись) 3. Для установки зависимостей (что бы раз в сутки пробегаться по медиа и удалять те, у которых больше нет зависимостей) - создал таблицу medias И, добавил subscribers (beforeInsert) на сущности, которые используют media Хорошее ли это решение и есть ли альтернативы?
- Всем привет. Создаю миграцию командой gen - всё ок, файл с миграцией создаётся. Но когда накатываю эту миграцию run - то в БД создаётся только одна таблица migration - в чём может быть косяк?

Main message:
Упало значит, лог глянь

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Упало значит, лог глянь

--

## My telegram message #129805
**Time:** 31.10.2021 14:24:30 UTC+05:00
**Link:** https://t.me/nest_ru/129805

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
У тя будет связанность сильная между модулями, за счёт общей удалялки

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

У тя будет связанность сильная между модулями, за счёт общей удалялки

--

## My telegram message #129809
**Time:** 31.10.2021 14:27:14 UTC+05:00
**Link:** https://t.me/nest_ru/129809

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Спасибо А в целом идея, создавать отдельную таблицу для медиа нормальная? По логике - да. Но появился ряд подводных камней , вот и спрашиваю

Main message:
зависит от кейсов, может случится что эта табличка свяжет модули опять между собою

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

зависит от кейсов, может случится что эта табличка свяжет модули опять между собою

--

## My telegram message #129811
**Time:** 31.10.2021 14:27:52 UTC+05:00
**Link:** https://t.me/nest_ru/129811

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
в дата грип иногда синхронизация тупит, может в этом дело

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

в дата грип иногда синхронизация тупит, может в этом дело

--

## My telegram message #129816
**Time:** 31.10.2021 15:03:17 UTC+05:00
**Link:** https://t.me/nest_ru/129816

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- В частности, не знаю как организовать механизм связки любой сущности с этим медиа Хочется делать это динамически, что бы не дублировать код Как идея - хочу создать subscriber, который динамически добавляется ко всем сущностям (у которых в .entity есть зависимость с MediaRepository)
- в дата грип иногда синхронизация тупит, может в этом дело
- да не, дата грип ещё не причём пока, ща чисто с консолью работаю
- Ну почему Можно ведь просто написать sql хуки,они ведь существуют

Main message:
в базе тригеры можно создать

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

в базе тригеры можно создать

--

## My telegram message #129821
**Time:** 31.10.2021 15:05:16 UTC+05:00
**Link:** https://t.me/nest_ru/129821

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- да не, дата грип ещё не причём пока, ща чисто с консолью работаю
- Ну почему Можно ведь просто написать sql хуки,они ведь существуют
- в базе тригеры можно создать
- Да,я это и имел ввиду

Main message:
у меня например не тайп орм, я ушел с него) и ты можешь в какой то момент перейти на чет другое, а если завязан на хуках то не сможешь

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

у меня например не тайп орм, я ушел с него) и ты можешь в какой то момент перейти на чет другое, а если завязан на хуках то не сможешь

--

## My telegram message #129823
**Time:** 31.10.2021 15:06:17 UTC+05:00
**Link:** https://t.me/nest_ru/129823

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- в базе тригеры можно создать
- Да,я это и имел ввиду
- у меня например не тайп орм, я ушел с него) и ты можешь в какой то момент перейти на чет другое, а если завязан на хуках то не сможешь
- Ну тогда нужно уточнять причину,почему не юзать

Main message:
у тя в ентити получается будет бизнес логика, и эта логика иногда может и не должна сработать

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

у тя в ентити получается будет бизнес логика, и эта логика иногда может и не должна сработать

--

## My telegram message #129829
**Time:** 31.10.2021 15:07:56 UTC+05:00
**Link:** https://t.me/nest_ru/129829

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- у меня например не тайп орм, я ушел с него) и ты можешь в какой то момент перейти на чет другое, а если завязан на хуках то не сможешь
- Ну тогда нужно уточнять причину,почему не юзать
- у тя в ентити получается будет бизнес логика, и эта логика иногда может и не должна сработать
- Мы юзаем objection - там хуки есть

Main message:
ну если пока не попадали в кучу условий и путаницы с хуками, тогда можете юзать, почему бы и нет, когда у тя 3000 ентити и в каждом свои хуки которые то нужны то нет

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

ну если пока не попадали в кучу условий и путаницы с хуками, тогда можете юзать, почему бы и нет, когда у тя 3000 ентити и в каждом свои хуки которые то нужны то нет

--

## My telegram message #129836
**Time:** 31.10.2021 15:13:14 UTC+05:00
**Link:** https://t.me/nest_ru/129836

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- ну если пока не попадали в кучу условий и путаницы с хуками, тогда можете юзать, почему бы и нет, когда у тя 3000 ентити и в каждом свои хуки которые то нужны то нет
- Хук прописывают тогда,когда он нужен в 100% случаев
- Кстати по поводу секвалайза, кто-нибудь сталкивался с таким?:  Type 'typeof UserModel' is not assignable to type 'ModelCtor<Model<any, any>>'
- Либо такой вариант

Main message:
чисто мое мнение - есть у базы данных события на которые ты можешь подписаться, если нужна кодовая обработка а не в sql, можно так делать и у тебя ентити и код обработки будут развязаны некий сервис UserDataChangeHandler и ты его можешь тестировать отдельно как юнит тест

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

чисто мое мнение - есть у базы данных события на которые ты можешь подписаться, если нужна кодовая обработка а не в sql, можно так делать и у тебя ентити и код обработки будут развязаны некий сервис UserDataChangeHandler и ты его можешь тестировать отдельно как юнит тест

--

## My telegram message #129839
**Time:** 31.10.2021 15:15:32 UTC+05:00
**Link:** https://t.me/nest_ru/129839

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Кстати по поводу секвалайза, кто-нибудь сталкивался с таким?:  Type 'typeof UserModel' is not assignable to type 'ModelCtor<Model<any, any>>'
- Либо такой вариант
- чисто мое мнение - есть у базы данных события на которые ты можешь подписаться, если нужна кодовая обработка а не в sql, можно так делать и у тебя ентити и код обработки будут развязаны некий сервис UserDataChangeHandler и ты его можешь тестировать отдельно как юнит тест
- А ты не знаешь, как себя ведёт триггер, если условно я вызываю insert(transaction) и у меня есть триггер onInsert

Main message:
я не использую транзакции, лок происходит при большом колве инсертов и апдейтов и выборки замедляются у этих сущностей

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

я не использую транзакции, лок происходит при большом колве инсертов и апдейтов и выборки замедляются у этих сущностей

--

## My telegram message #129841
**Time:** 31.10.2021 15:16:15 UTC+05:00
**Link:** https://t.me/nest_ru/129841

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- чисто мое мнение - есть у базы данных события на которые ты можешь подписаться, если нужна кодовая обработка а не в sql, можно так делать и у тебя ентити и код обработки будут развязаны некий сервис UserDataChangeHandler и ты его можешь тестировать отдельно как юнит тест
- А ты не знаешь, как себя ведёт триггер, если условно я вызываю insert(transaction) и у меня есть триггер onInsert
- я не использую транзакции, лок происходит при большом колве инсертов и апдейтов и выборки замедляются у этих сущностей
- А что ты используешь вместо транзакций?

Main message:
я руками откатываю кодом не корректные данные если такие возникли

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

я руками откатываю кодом не корректные данные если такие возникли

--

## My telegram message #129845
**Time:** 31.10.2021 15:16:49 UTC+05:00
**Link:** https://t.me/nest_ru/129845

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- я не использую транзакции, лок происходит при большом колве инсертов и апдейтов и выборки замедляются у этих сущностей
- А что ты используешь вместо транзакций?
- я руками откатываю кодом не корректные данные если такие возникли
- Еб

Main message:
таких тока два места из сотни

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

таких тока два места из сотни

--

## My telegram message #129849
**Time:** 31.10.2021 15:29:25 UTC+05:00
**Link:** https://t.me/nest_ru/129849

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Звучит как-то очень костыльно

Main message:
что в транзакциях делать можем, вот пример мой, все шаги в одной транзакции, транзакция юзаится чтобы не откатывать по отдельности шаг1 оплатили продукт шаг2 списали с счета деньги за продукт шаг3 пересчитали баланс оно все выполняется в одной базе, используется где-то 5 таблиц, код в монолите, тут очень малый шанс что операции прервутся, проверка баланса и наличе указанного продукта, проверка юзера, проверка кошелька - это все происходит до запуска кода покупки операция может прерваться только если произошел редеплой или ребут сервака или базы данных, обычно опрераций гораздо больше которые участвуют в процессе, это так простой пример, и там участвуют куча звеньев и микросервисов, и базы разные, транзакция там уже не спасет, придется руками все подчищать или пилить все через события в микросервисах, и даже если ребут произойдет операция продолжит выполнятся но если например уже баланс сменился то да операция не сможет произойти и нужно руками чистить и писать код который переодически будет вычищать такие операции которые преравлиьс

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

что в транзакциях делать можем, вот пример мой, все шаги в одной транзакции, транзакция юзаится чтобы не откатывать по отдельности шаг1 оплатили продукт шаг2 списали с счета деньги за продукт шаг3 пересчитали баланс оно все выполняется в одной базе, используется где-то 5 таблиц, код в монолите, тут очень малый шанс что операции прервутся, проверка баланса и наличе указанного продукта, проверка юзера, проверка кошелька - это все происходит до запуска кода покупки операция может прерваться только если произошел редеплой или ребут сервака или базы данных, обычно опрераций гораздо больше которые участвуют в процессе, это так простой пример, и там участвуют куча звеньев и микросервисов, и базы разные, транзакция там уже не спасет, придется руками все подчищать или пилить все через события в микросервисах, и даже если ребут произойдет операция продолжит выполнятся но если например уже баланс сменился то да операция не сможет произойти и нужно руками чистить и писать код который переодически будет вычищать такие операции которые преравлиьс

--

## My telegram message #129852
**Time:** 31.10.2021 15:31:17 UTC+05:00
**Link:** https://t.me/nest_ru/129852

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Звучит как-то очень костыльно
- Они там много чего поменяли, мне пришлось сделать новый workspace и переносить потом код. Тоже CI отвалился
- что в транзакциях делать можем, вот пример мой, все шаги в одной транзакции, транзакция юзаится чтобы не откатывать по отдельности шаг1 оплатили продукт шаг2 списали с счета деньги за продукт шаг3 пересчитали баланс оно все выполняется в одной базе, используется где-то 5 таблиц, код в монолите, тут очень малый шанс что операции прервутся, проверка баланса и наличе указанного продукта, проверка юзера, проверка кошелька - это все происходит до запуска кода покупки операция может прерваться только если произошел редеплой или ребут сервака или базы данных, обычно опрераций гораздо больше которые участвуют в процессе, это так простой пример, и там участвуют куча звеньев и микросервисов, и базы разные, транзакция там уже не спасет, придется руками все подчищать или пилить все через события в микросервисах, и даже если ребут произойдет операция продолжит выполнятся но если например уже баланс сменился то да операция не сможет произойти и нужно руками чистить и писать код который переодически будет вычищать такие операции которые преравлиьс
- "очень малый шанс,что операции прервутся" - это не аргумент

Main message:
транзакции замедляют работу с базой, чтобы ускорить придется разнести по микросервисам, а там уже не выйдет юзать транзакции

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

транзакции замедляют работу с базой, чтобы ускорить придется разнести по микросервисам, а там уже не выйдет юзать транзакции

--

## My telegram message #129855
**Time:** 31.10.2021 15:31:57 UTC+05:00
**Link:** https://t.me/nest_ru/129855

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- что в транзакциях делать можем, вот пример мой, все шаги в одной транзакции, транзакция юзаится чтобы не откатывать по отдельности шаг1 оплатили продукт шаг2 списали с счета деньги за продукт шаг3 пересчитали баланс оно все выполняется в одной базе, используется где-то 5 таблиц, код в монолите, тут очень малый шанс что операции прервутся, проверка баланса и наличе указанного продукта, проверка юзера, проверка кошелька - это все происходит до запуска кода покупки операция может прерваться только если произошел редеплой или ребут сервака или базы данных, обычно опрераций гораздо больше которые участвуют в процессе, это так простой пример, и там участвуют куча звеньев и микросервисов, и базы разные, транзакция там уже не спасет, придется руками все подчищать или пилить все через события в микросервисах, и даже если ребут произойдет операция продолжит выполнятся но если например уже баланс сменился то да операция не сможет произойти и нужно руками чистить и писать код который переодически будет вычищать такие операции которые преравлиьс
- "очень малый шанс,что операции прервутся" - это не аргумент
- транзакции замедляют работу с базой, чтобы ускорить придется разнести по микросервисам, а там уже не выйдет юзать транзакции
- Получается, ты хочешь сказать,что транзакции вообще не нужны?

Main message:
почему бы сразу это не сделать а не потом через 2 месяца и наплыва милион людей в сек

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

почему бы сразу это не сделать а не потом через 2 месяца и наплыва милион людей в сек

--

## My telegram message #129858
**Time:** 31.10.2021 15:42:43 UTC+05:00
**Link:** https://t.me/nest_ru/129858

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- транзакции замедляют работу с базой, чтобы ускорить придется разнести по микросервисам, а там уже не выйдет юзать транзакции
- Получается, ты хочешь сказать,что транзакции вообще не нужны?
- почему бы сразу это не сделать а не потом через 2 месяца и наплыва милион людей в сек
- Представь, каково будет новому девелоперу читать блок catch, и думать, почему-то это тут мы удаляем вот это и вот это,если в блоке трай мы делали insert совершенно другого

Main message:
Вот в выше кейсе можно сделать табличку транзакции и там фиксировать факт покупки - это одна операция, после этого запускаешь функцию для пересчёта баланса и тут падает мс Баланс можно пересчитывать для всех людей при ребуте мс

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Вот в выше кейсе можно сделать табличку транзакции и там фиксировать факт покупки - это одна операция, после этого запускаешь функцию для пересчёта баланса и тут падает мс Баланс можно пересчитывать для всех людей при ребуте мс

--

## My telegram message #129860
**Time:** 31.10.2021 15:43:21 UTC+05:00
**Link:** https://t.me/nest_ru/129860

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- почему бы сразу это не сделать а не потом через 2 месяца и наплыва милион людей в сек
- Представь, каково будет новому девелоперу читать блок catch, и думать, почему-то это тут мы удаляем вот это и вот это,если в блоке трай мы делали insert совершенно другого
- Вот в выше кейсе можно сделать табличку транзакции и там фиксировать факт покупки - это одна операция, после этого запускаешь функцию для пересчёта баланса и тут падает мс Баланс можно пересчитывать для всех людей при ребуте мс
- "тут очень малый шанс что операции прервутся" - у БД реплики мастер со слейвом поменялись местами - вся эта цепочка развалится, если без транзакции.

Main message:
По-другому можно код просто написать и ниче откатывать не надо

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

По-другому можно код просто написать и ниче откатывать не надо

--

## My telegram message #129870
**Time:** 31.10.2021 15:50:08 UTC+05:00
**Link:** https://t.me/nest_ru/129870

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
тригер можешь воткнуть в базу чтобы чекал, операция замедлится конечно, ну зато не будет такого, там уже транзакции и балансы нужно будет бить по категориям и где то код разный придется писать

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

тригер можешь воткнуть в базу чтобы чекал, операция замедлится конечно, ну зато не будет такого, там уже транзакции и балансы нужно будет бить по категориям и где то код разный придется писать

--

## My telegram message #129874
**Time:** 31.10.2021 15:55:30 UTC+05:00
**Link:** https://t.me/nest_ru/129874

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- За 10 лет работы со всякими ORM я на это говно уже порядком насмотрелся, поэтому не рискую я именно по этой причине, а не потому, что мне лень доку почитать)
- Кто как хочет,так и говнокодит)
- тригер можешь воткнуть в базу чтобы чекал, операция замедлится конечно, ну зато не будет такого, там уже транзакции и балансы нужно будет бить по категориям и где то код разный придется писать
- Я бы не был столь категоричен насчёт "замедляют работу с базой" и "чтобы ускорить придется разнести по микросервисам"

Main message:
нужно под нагрузкой смотреть все что с транзакциями, я же во флуде вроде отписывался как у меня все встало, когда тысячи транзакций в секунду

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

нужно под нагрузкой смотреть все что с транзакциями, я же во флуде вроде отписывался как у меня все встало, когда тысячи транзакций в секунду

--

## My telegram message #129877
**Time:** 31.10.2021 15:56:21 UTC+05:00
**Link:** https://t.me/nest_ru/129877

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- тригер можешь воткнуть в базу чтобы чекал, операция замедлится конечно, ну зато не будет такого, там уже транзакции и балансы нужно будет бить по категориям и где то код разный придется писать
- Я бы не был столь категоричен насчёт "замедляют работу с базой" и "чтобы ускорить придется разнести по микросервисам"
- нужно под нагрузкой смотреть все что с транзакциями, я же во флуде вроде отписывался как у меня все встало, когда тысячи транзакций в секунду
- Ну на таком железе и NodeJS раком встанет)

Main message:
убираешь транзакции и все 10тыщ норм отрабатывают

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

убираешь транзакции и все 10тыщ норм отрабатывают

--

## My telegram message #129879
**Time:** 31.10.2021 15:56:53 UTC+05:00
**Link:** https://t.me/nest_ru/129879

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- нужно под нагрузкой смотреть все что с транзакциями, я же во флуде вроде отписывался как у меня все встало, когда тысячи транзакций в секунду
- Ну на таком железе и NodeJS раком встанет)
- убираешь транзакции и все 10тыщ норм отрабатывают
- У тебя именно база вставала? Или API?

Main message:
код пришлось конечно менять чтобы целостность данных сохранить

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

код пришлось конечно менять чтобы целостность данных сохранить

--

## My telegram message #129882
**Time:** 31.10.2021 15:57:42 UTC+05:00
**Link:** https://t.me/nest_ru/129882

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- убираешь транзакции и все 10тыщ норм отрабатывают
- У тебя именно база вставала? Или API?
- код пришлось конечно менять чтобы целостность данных сохранить
- Понял

Main message:
там же очередь у нее внутри

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

там же очередь у нее внутри

--

## My telegram message #129888
**Time:** 31.10.2021 16:00:08 UTC+05:00
**Link:** https://t.me/nest_ru/129888

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- код пришлось конечно менять чтобы целостность данных сохранить
- Понял
- там же очередь у нее внутри
- Есть реальные проекты в проде,где на бд выделяется такие ресурсы?

Main message:
ну это пример, то что ты упрешся один фиг в это, когда нагрузка вырастит, хоть сколько не увеличивай железо

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

ну это пример, то что ты упрешся один фиг в это, когда нагрузка вырастит, хоть сколько не увеличивай железо

--

## My telegram message #129890
**Time:** 31.10.2021 16:03:43 UTC+05:00
**Link:** https://t.me/nest_ru/129890

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- там же очередь у нее внутри
- Есть реальные проекты в проде,где на бд выделяется такие ресурсы?
- ну это пример, то что ты упрешся один фиг в это, когда нагрузка вырастит, хоть сколько не увеличивай железо
- А у тебя API через пул базу юзало, или одним коннектом?

Main message:
с пулом там еще все интереснее) у меня был пул дефолт там как то расчитывается сам от колва процов

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

с пулом там еще все интереснее) у меня был пул дефолт там как то расчитывается сам от колва процов

--

## My telegram message #129894
**Time:** 31.10.2021 16:04:27 UTC+05:00
**Link:** https://t.me/nest_ru/129894

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- ну это пример, то что ты упрешся один фиг в это, когда нагрузка вырастит, хоть сколько не увеличивай железо
- А у тебя API через пул базу юзало, или одним коннектом?
- с пулом там еще все интереснее) у меня был пул дефолт там как то расчитывается сам от колва процов
- Хз, у меня в конторе есть сейчас проект для азиатского рынка (на пыхе) с достаточно высоким трафом (точные цифры не скажу - хз) - всё летает там. Есть тормозные запросы, но они кроном запускаюся, то есть на юзеров не влияют. А транзакций там дофига

Main message:
пых не так работает же как нода)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

пых не так работает же как нода)

--

## My telegram message #129900
**Time:** 31.10.2021 16:08:03 UTC+05:00
**Link:** https://t.me/nest_ru/129900

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- с пулом там еще все интереснее) у меня был пул дефолт там как то расчитывается сам от колва процов
- Хз, у меня в конторе есть сейчас проект для азиатского рынка (на пыхе) с достаточно высоким трафом (точные цифры не скажу - хз) - всё летает там. Есть тормозные запросы, но они кроном запускаюся, то есть на юзеров не влияют. А транзакций там дофига
- пых не так работает же как нода)
- Так ты про базу ж, там вообще не в языке дело. Это я так к слову уточнил

Main message:
я так его и не тестанул кстати

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

я так его и не тестанул кстати

--

## My telegram message #129902
**Time:** 31.10.2021 16:08:57 UTC+05:00
**Link:** https://t.me/nest_ru/129902

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- пых не так работает же как нода)
- Так ты про базу ж, там вообще не в языке дело. Это я так к слову уточнил
- я так его и не тестанул кстати
- pgbouncer? Ну с нодой он не нужен, т.к. нефига не даст

Main message:
да его

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

да его

--

## My telegram message #129908
**Time:** 31.10.2021 16:12:52 UTC+05:00
**Link:** https://t.me/nest_ru/129908

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- я так его и не тестанул кстати
- pgbouncer? Ну с нодой он не нужен, т.к. нефига не даст
- да его
- Его большим и не рекомендуется, кстати, делать. У меня в конторе на боевом проекте 500 стоит (и то это с запасом специально сделано, т.к. мне надо иногда пилить асинхронные скрипты, и я в пределах 200 коннектов в пул себе забираю)

Main message:
да я про него и говорил что увеличивал

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

да я про него и говорил что увеличивал

--

## My telegram message #129910
**Time:** 31.10.2021 16:13:58 UTC+05:00
**Link:** https://t.me/nest_ru/129910

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- да его
- Его большим и не рекомендуется, кстати, делать. У меня в конторе на боевом проекте 500 стоит (и то это с запасом специально сделано, т.к. мне надо иногда пилить асинхронные скрипты, и я в пределах 200 коннектов в пул себе забираю)
- да я про него и говорил что увеличивал
- А max_connections не превысил? В PostgreSQL

Main message:
неа

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

неа

--

## My telegram message #129920
**Time:** 31.10.2021 22:19:51 UTC+05:00
**Link:** https://t.me/nest_ru/129920

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- А max_connections не превысил? В PostgreSQL
- неа
- Всем привет, вопрос, почему может не отрабатывать plainToClass?
- Чуток подробностей)

Main message:
там есть опции при трансформации

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

там есть опции при трансформации

--

## My telegram message #129929
**Time:** 31.10.2021 22:35:22 UTC+05:00
**Link:** https://t.me/nest_ru/129929

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Guys, а что если nvm идет по пути  C:\Program Files\nodejs , но по этому пути должен идти NodeJS? Хотя переустановил nvm и разбил голову над этим. ОС - Windows 10 ❤️

Main message:
хорошая ось, можно ворд там установить и эксель с аксцесс

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

хорошая ось, можно ворд там установить и эксель с аксцесс

--

## My telegram message #129932
**Time:** 31.10.2021 22:36:00 UTC+05:00
**Link:** https://t.me/nest_ru/129932

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- да
- Ну допустим это:  https://github.com/rengthp/nestjs-rabbitmq-microservice
- хорошая ось, можно ворд там установить и эксель с аксцесс
- 🤬😉

Main message:
nvm это не про винду

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

nvm это не про винду

--

## My telegram message #129935
**Time:** 31.10.2021 22:37:56 UTC+05:00
**Link:** https://t.me/nest_ru/129935

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
у меня винда стоит на компе для ворда и vmware с ubuntu для кодинга

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

у меня винда стоит на компе для ворда и vmware с ubuntu для кодинга

--

## My telegram message #129970
**Time:** 01.11.2021 01:30:10 UTC+05:00
**Link:** https://t.me/nest_ru/129970

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Почему?) Есть же wsl, в котором отлично работает nvm

Main message:
Раньше фигово там всё было, когда тока оно появилось, мне проще убунту в виртуалке поднять

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Раньше фигово там всё было, когда тока оно появилось, мне проще убунту в виртуалке поднять

--

## My telegram message #129973
**Time:** 01.11.2021 01:37:23 UTC+05:00
**Link:** https://t.me/nest_ru/129973

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Кстати, вопрос из другой "оперы": какой max-old-space-size вы для ноды выставляете в проде, и как подбирали нужное значение?
- Почему?) Есть же wsl, в котором отлично работает nvm
- Раньше фигово там всё было, когда тока оно появилось, мне проще убунту в виртуалке поднять
- Я недавно только слез, потому что на мак перешел. В целом если единственная ос - винда, то это решение всех недостатков (чисто мое мнение) От обычного linux есть отличия, заводятся не все приложения, но для разработки на nodejs ограничений не было. Ограничений по ресурсам тоже нет как в виртуалке. Vscode можно без проблем открывать через wsl и разрабатывать сразу там. Из минусов периодически долго открывается терминал

Main message:
Я кубернетес поднимаю чтобы тестировать фичи всякие чтобы как прод был и шарю виртуалку в инет под доменом

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Я кубернетес поднимаю чтобы тестировать фичи всякие чтобы как прод был и шарю виртуалку в инет под доменом

--

## My telegram message #129977
**Time:** 01.11.2021 01:39:34 UTC+05:00
**Link:** https://t.me/nest_ru/129977

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Раньше фигово там всё было, когда тока оно появилось, мне проще убунту в виртуалке поднять
- Я недавно только слез, потому что на мак перешел. В целом если единственная ос - винда, то это решение всех недостатков (чисто мое мнение) От обычного linux есть отличия, заводятся не все приложения, но для разработки на nodejs ограничений не было. Ограничений по ресурсам тоже нет как в виртуалке. Vscode можно без проблем открывать через wsl и разрабатывать сразу там. Из минусов периодически долго открывается терминал
- Я кубернетес поднимаю чтобы тестировать фичи всякие чтобы как прод был и шарю виртуалку в инет под доменом
- демоны это даемоны?

Main message:
Не, просто демоны, типа нечесть всякая, вурдалаки там реакт разрабы...

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Не, просто демоны, типа нечесть всякая, вурдалаки там реакт разрабы...

--

## My telegram message #129987
**Time:** 01.11.2021 07:52:52 UTC+05:00
**Link:** https://t.me/nest_ru/129987

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Что-т туплю, подскажите плиз как поступить Юзаю class-transformer, и через  @Transform () пытаюсь модифицировать ключ type. В данной модификации мне нужно проверить genres, на наличие некоторых строк, чтобы задать более точный type Пытался что-то сделать но this недоступен при трансформации, из-за этого нет доступа к this.genres, как мне тут поступить?

Main message:
там есть свойство в котором лежит весь объект, если нужен метод, то сделай его статиком так вызывай

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

там есть свойство в котором лежит весь объект, если нужен метод, то сделай его статиком так вызывай

--

## My telegram message #130006
**Time:** 01.11.2021 16:33:15 UTC+05:00
**Link:** https://t.me/nest_ru/130006

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- https://github.com/typestack/class-transformer#working-with-nested-objects
- а где пример то сам?
- в нпм пакете мб больше инфы
- там интерфейсы описаны, мне больно будет в перекомпиленном коде разибарться

Main message:
https://stackblitz.com/edit/typescript-2ent4p?file=index.ts  import { Expose, Type, plainToClass } from 'class-transformer'; import 'reflect-metadata'; export class Album { @Expose() id: number; @Expose() name: string; @Type(() => Photo) @Expose() photos: Photo[]; } export class Photo { @Expose() id: number; @Expose() filename: string; } let album = plainToClass( Album, { aaa: 'bbbb', id: 1, photos: [{ id: 2, filename: 'ss', cccc: 'dddd' }] }, { strategy: 'excludeAll' } ); console.log(album);

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

https://stackblitz.com/edit/typescript-2ent4p?file=index.ts  import { Expose, Type, plainToClass } from 'class-transformer'; import 'reflect-metadata'; export class Album { @Expose() id: number; @Expose() name: string; @Type(() => Photo) @Expose() photos: Photo[]; } export class Photo { @Expose() id: number; @Expose() filename: string; } let album = plainToClass( Album, { aaa: 'bbbb', id: 1, photos: [{ id: 2, filename: 'ss', cccc: 'dddd' }] }, { strategy: 'excludeAll' } ); console.log(album);

--

## My telegram message #130011
**Time:** 01.11.2021 16:48:54 UTC+05:00
**Link:** https://t.me/nest_ru/130011

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- в нпм пакете мб больше инфы
- там интерфейсы описаны, мне больно будет в перекомпиленном коде разибарться
- https://stackblitz.com/edit/typescript-2ent4p?file=index.ts  import { Expose, Type, plainToClass } from 'class-transformer'; import 'reflect-metadata'; export class Album { @Expose() id: number; @Expose() name: string; @Type(() => Photo) @Expose() photos: Photo[]; } export class Photo { @Expose() id: number; @Expose() filename: string; } let album = plainToClass( Album, { aaa: 'bbbb', id: 1, photos: [{ id: 2, filename: 'ss', cccc: 'dddd' }] }, { strategy: 'excludeAll' } ); console.log(album);
- Ильшат, ты лучший, но теперь вопрос

Main message:
https://stackblitz.com/edit/typescript-ksdzgs?file=index.ts

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

https://stackblitz.com/edit/typescript-ksdzgs?file=index.ts

--

## My telegram message #130016
**Time:** 01.11.2021 16:52:05 UTC+05:00
**Link:** https://t.me/nest_ru/130016

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- https://stackblitz.com/edit/typescript-2ent4p?file=index.ts  import { Expose, Type, plainToClass } from 'class-transformer'; import 'reflect-metadata'; export class Album { @Expose() id: number; @Expose() name: string; @Type(() => Photo) @Expose() photos: Photo[]; } export class Photo { @Expose() id: number; @Expose() filename: string; } let album = plainToClass( Album, { aaa: 'bbbb', id: 1, photos: [{ id: 2, filename: 'ss', cccc: 'dddd' }] }, { strategy: 'excludeAll' } ); console.log(album);
- Ильшат, ты лучший, но теперь вопрос
- https://stackblitz.com/edit/typescript-ksdzgs?file=index.ts
- ооо

Main message:
значит не все

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

значит не все

--

## My telegram message #130021
**Time:** 01.11.2021 16:55:56 UTC+05:00
**Link:** https://t.me/nest_ru/130021

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- https://stackblitz.com/edit/typescript-ksdzgs?file=index.ts
- ооо
- значит не все
- это какие то приколы

Main message:
переделай мой стек блитс и добейся чтобы он не работал и кинь сюда ссылку

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

переделай мой стек блитс и добейся чтобы он не работал и кинь сюда ссылку

--

## My telegram message #130025
**Time:** 01.11.2021 18:02:49 UTC+05:00
**Link:** https://t.me/nest_ru/130025

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- значит не все
- это какие то приколы
- переделай мой стек блитс и добейся чтобы он не работал и кинь сюда ссылку
- Такс, вообщем я не знаю что происходит

Main message:
у тя граф?

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

у тя граф?

--

## My telegram message #130037
**Time:** 01.11.2021 20:56:06 UTC+05:00
**Link:** https://t.me/nest_ru/130037

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Такс, вообщем я не знаю что происходит
- у тя граф?
- Да
- Илшат

Main message:
Рефлект метадату везде добавляешь?

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Рефлект метадату везде добавляешь?

--

## My telegram message #130051
**Time:** 01.11.2021 23:39:48 UTC+05:00
**Link:** https://t.me/nest_ru/130051

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Илшат
- Рефлект метадату везде добавляешь?
- Ща я посмотрю что я куда добавляю
- и так, ну всё, оно походу так и работает  @KaufmanEndy

Main message:
Дай пример не рабочего кода в стекблитс

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Дай пример не рабочего кода в стекблитс

--

## My telegram message #130430
**Time:** 02.11.2021 23:39:27 UTC+05:00
**Link:** https://t.me/nest_ru/130430

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Универсальность. Мне нужен фильтр который будет срабатывать каждый раз когда возвращаемая ошибка от бд содержит already exist. Он работает с любыми сущностями, он не знает о dto, все что он знает это то, в базу сохранить это нельзя потому что дубль, и показывает в какую таблицу и что не удалось сохранить

Main message:
у меня есть такое, может чет поможет отсюда  @Catch(TypeError) export class CoreErrorsFilter implements ExceptionFilter { private logger = new Logger(CoreErrorsFilter.name); catch(exception: TypeError, ctx: ExecutionContext): void { const context = ctx.switchToHttp(); const response = context.getResponse<Response>(); const request = getRequestFromExecutionContext(ctx); const status = HttpStatus.BAD_REQUEST; if (request) { this.logger.error({ ...exception }, exception.stack); if (typeof response.status === 'function') { (response.status ? response.status(status) : response).json({ code: CoreErrorsEnum.UnexpectedError, message: CORE_ERRORS_ENUM_TITLES[CoreErrorsEnum.UnexpectedError] || '', }); } } } }

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

у меня есть такое, может чет поможет отсюда  @Catch(TypeError) export class CoreErrorsFilter implements ExceptionFilter { private logger = new Logger(CoreErrorsFilter.name); catch(exception: TypeError, ctx: ExecutionContext): void { const context = ctx.switchToHttp(); const response = context.getResponse<Response>(); const request = getRequestFromExecutionContext(ctx); const status = HttpStatus.BAD_REQUEST; if (request) { this.logger.error({ ...exception }, exception.stack); if (typeof response.status === 'function') { (response.status ? response.status(status) : response).json({ code: CoreErrorsEnum.UnexpectedError, message: CORE_ERRORS_ENUM_TITLES[CoreErrorsEnum.UnexpectedError] || '', }); } } } }

--

## My telegram message #130448
**Time:** 03.11.2021 00:05:30 UTC+05:00
**Link:** https://t.me/nest_ru/130448

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- через диай

Main message:
хуай) сам логгер это логика его, это уже абстрактный класс

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

хуай) сам логгер это логика его, это уже абстрактный класс

--

## My telegram message #130452
**Time:** 03.11.2021 00:05:54 UTC+05:00
**Link:** https://t.me/nest_ru/130452

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Да это местная шутка с ним ;)
- хуай) сам логгер это логика его, это уже абстрактный класс
- Спасибо. Это как раз то что надо
- а, да?

Main message:
через диай нужно другую сущность кидать

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

через диай нужно другую сущность кидать

--

## My telegram message #130455
**Time:** 03.11.2021 00:06:20 UTC+05:00
**Link:** https://t.me/nest_ru/130455

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Спасибо. Это как раз то что надо
- а, да?
- через диай нужно другую сущность кидать
- гг, лучше бы я ничё сегодня лиду не говорил

Main message:
const app = await NestFactory.create(AppModule, { logger: new CoreLogger(), cors: { origin: '*' } });

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

const app = await NestFactory.create(AppModule, { logger: new CoreLogger(), cors: { origin: '*' } });

--

## My telegram message #130458
**Time:** 03.11.2021 00:07:02 UTC+05:00
**Link:** https://t.me/nest_ru/130458

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Хз, в Go я логгер через DI забрасываю, кстати

Main message:
тут не нужно это делать)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

тут не нужно это делать)

--

## My telegram message #130461
**Time:** 03.11.2021 00:07:39 UTC+05:00
**Link:** https://t.me/nest_ru/130461

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- const app = await NestFactory.create(AppModule, { logger: new CoreLogger(), cors: { origin: '*' } });
- Хз, в Go я логгер через DI забрасываю, кстати
- тут не нужно это делать)
- Да может и там не нужно, просто хз кто может это прояснить

Main message:
в доке есть все

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

в доке есть все

--

## My telegram message #130468
**Time:** 03.11.2021 00:17:00 UTC+05:00
**Link:** https://t.me/nest_ru/130468

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Такс, давайте разбираться, в логгере нет модуля логгер?

Main message:
я ща забаню тебя

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

я ща забаню тебя

--

## My telegram message #130485
**Time:** 03.11.2021 00:31:56 UTC+05:00
**Link:** https://t.me/nest_ru/130485

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Согласен, я бы сделал связь с  servers.id

Main message:
хороший сайт

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

хороший сайт

--

## My telegram message #130487
**Time:** 03.11.2021 00:32:25 UTC+05:00
**Link:** https://t.me/nest_ru/130487

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- а кто-то знает как при миграции указать путь к схеме которую использовать? сейчас миграция проводится в database-name/public/tables, а мне нужно в database-name/custom/tables использую Postgres

Main message:
две папки разные

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

две папки разные

--

## My telegram message #130492
**Time:** 03.11.2021 00:39:51 UTC+05:00
**Link:** https://t.me/nest_ru/130492

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- а каким должен быть конфиг?

Main message:
https://github.com/typeorm/typeorm/blob/master/docs/connection-options.md#postgres--cockroachdb-connection-options

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

https://github.com/typeorm/typeorm/blob/master/docs/connection-options.md#postgres--cockroachdb-connection-options

--

## My telegram message #130494
**Time:** 03.11.2021 00:40:42 UTC+05:00
**Link:** https://t.me/nest_ru/130494

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- а каким должен быть конфиг?
- Есть какой-то бестпрактис по созданию суперюзера при старте приложения?
- https://github.com/typeorm/typeorm/blob/master/docs/connection-options.md#postgres--cockroachdb-connection-options
- спасибо

Main message:
По тайп ОРМ пиши в тайп ОРМ) чтоб тут не флудить

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

По тайп ОРМ пиши в тайп ОРМ) чтоб тут не флудить

--

## My telegram message #130521
**Time:** 03.11.2021 14:22:24 UTC+05:00
**Link:** https://t.me/nest_ru/130521

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Nest - это микрофреймворк. К ORM и работе с БД он не имеет никакого отношения
- Всем привет мне нужно вызывать один метод при старте приложения, для этого использую implements OnModuleInit в одном из сервисов и внутри этого сервиса использую метод onModuleInit() {} Столкнулся с проблемой что метод срабатывает 2 раза, хотя во всем приложении он используется только здесь Буду благодарен если поможете понять из-за чего это происходит
- Привет. Возможно по ошибке сервис в двух модулях в провайдерах зарегистрирован, в эту сторону можно посмотреть.
- @KaufmanEndy Привет Подскажи, пожалуйста, есть ли возможность при помощи DI перезаписать уже существующий метод? аля для метода getAll() повесили метаданные Permission и внутри PermissionService -> onModuleInit вытягиваю все методы с такими метаданными. Но, при попытке перезаписать handler - ничего не отрабатывает P.S. Понимаю, что можно делать просто внутри декоратора. Но, т.к. там нельяя делать нормальны Inject, хотел этого избежать

Main message:
ты просто можешь через жс его перезаписать service.getAll=()=>{ console.log('custom logic')} только зачем

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

ты просто можешь через жс его перезаписать service.getAll=()=>{ console.log('custom logic')} только зачем

--

## My telegram message #130524
**Time:** 03.11.2021 15:21:10 UTC+05:00
**Link:** https://t.me/nest_ru/130524

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Ошибка которую возврашает Class-validator является инстансом BadRequestException как я понямаю данного класса в этом пакете нету, он встроен в  @nest /common, вопрос: это только у меня или так и задуманно, просто мне в фильтре исходя из типов ошибок нужно вазврашать разные данные, если ошибка является инстенсом BadRequestException можно ли утверждать что ошибка валидации а не другого типа, есть возможность самому глобально описать ошибку для class-validator??

Main message:
https://github.com/rucken/core-nestjs/blob/develop/libs/rucken/core-nestjs/src/filters/custom-exception.filter.ts#L31

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

https://github.com/rucken/core-nestjs/blob/develop/libs/rucken/core-nestjs/src/filters/custom-exception.filter.ts#L31

--

## My telegram message #130540
**Time:** 03.11.2021 20:00:45 UTC+05:00
**Link:** https://t.me/nest_ru/130540

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- не знаю как правильно сделать, думал только при переопределении дёргать метод debug у родительского класса )  log() { super.debug() }
- если найду решения отпишу) так переопределять не имеет смысла мне нужно что б уровень LOG (logger.log) писался в logzio, и при этом засерать бутстрапом неохта
- на крайний случай отключить совсем при бутстрапе, но так можно ошибки не увидеть.
- тоже не вариант) хочется что б уровень ERROR был все же

Main message:
можешь кастом запилить и через статик метод в ручную управлять уровнями, я контексты вырубаю когда они не нужны  https://gist.github.com/EndyKaufman/ff84d84c2caa601aa8a305ac996bf347 через енв управляю, чтобы не передоплоивать, меняю и рестартую вот с process.env беру так  (process.env.LOGGER_EXCLUDE_CONTEXTS! || '').split(',').forEach((contextName) => CoreLogger.addExcludeContexts(contextName));

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

можешь кастом запилить и через статик метод в ручную управлять уровнями, я контексты вырубаю когда они не нужны  https://gist.github.com/EndyKaufman/ff84d84c2caa601aa8a305ac996bf347 через енв управляю, чтобы не передоплоивать, меняю и рестартую вот с process.env беру так  (process.env.LOGGER_EXCLUDE_CONTEXTS! || '').split(',').forEach((contextName) => CoreLogger.addExcludeContexts(contextName));

--

## My telegram message #130667
**Time:** 04.11.2021 09:50:09 UTC+05:00
**Link:** https://t.me/nest_ru/130667

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- А я уже исключения пробрасывать начал)) Спасибо!
- если бы читал доки хотя бы поверхностно ...
- Сейчас увидел. До этого писал  @ApiResponse({status: 200}) и предполагал, что всё должно быть ок
- Кто-то в курсе как проверить, имеет ли строка числа с помощью class-validator ? Найти не могу (и да, долго и упорно смотрел доки)

Main message:
Кастомный валидатор

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Кастомный валидатор

--

## My telegram message #130670
**Time:** 04.11.2021 10:47:05 UTC+05:00
**Link:** https://t.me/nest_ru/130670

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Сделал просто проверку на сервисе. Сейчас на большее не хватит. (Там в 1 строку, так что не так ужасно

Main message:
У тя оно просто не в виде ошибки валидации полей будет, а просто мессадж, если ты эти ошибки на форме фронта к полю указывал, то придётся на фронте костылить

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

У тя оно просто не в виде ошибки валидации полей будет, а просто мессадж, если ты эти ошибки на форме фронта к полю указывал, то придётся на фронте костылить

--

## My telegram message #130732
**Time:** 04.11.2021 23:17:48 UTC+05:00
**Link:** https://t.me/nest_ru/130732

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
Лучше так и дома потихоньку проходи тутор из закрепа

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Лучше так и дома потихоньку проходи тутор из закрепа

--

