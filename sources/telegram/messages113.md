## My telegram message #116170
**Time:** 26.07.2021 13:54:44 UTC+05:00
**Link:** https://t.me/nest_ru/116170

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- кстати, есть вопрос по. поводу сборки. Есть либа, к примеру pdfMake, которая весит там 2мб к примеру. Так вот эта либа используется у меня только в 1 месте, я вынес эту либу из main.js, через ленивую загрузку либы import(./../..), и сейчас она у меня падает при билде в lazy chunk files, ну вот, из за одного места, мой build один хрен стал занимать больше времени. Есть ли пути. решения, как тольне не выносить. эту либу в BFF. ?

Main message:
в nest-cli и nx есть секция в конфиге чтобы указать веб паку что либа внешняя, по идее не должно падать, если кастомный веб пак, то гугли плагин для этого

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

в nest-cli и nx есть секция в конфиге чтобы указать веб паку что либа внешняя, по идее не должно падать, если кастомный веб пак, то гугли плагин для этого

--

## My telegram message #116174
**Time:** 26.07.2021 15:03:26 UTC+05:00
**Link:** https://t.me/nest_ru/116174

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- в nest-cli и nx есть секция в конфиге чтобы указать веб паку что либа внешняя, по идее не должно падать, если кастомный веб пак, то гугли плагин для этого
- Есть либа is-even))
- спасибо, прочитаю
- Я все переиисал и сдал , оуееее

Main message:
красавчик!)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

красавчик!)

--

## My telegram message #116231
**Time:** 27.07.2021 16:13:49 UTC+05:00
**Link:** https://t.me/nest_ru/116231

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- Всем привет, господа есть кто-то быстро может подсказать как заставить createApplicationContext не закрываться после старта ?

Main message:
вроде нет же, давно давно когда делал, он отрабатывал до конца, ну я ему посылал команду он ее выполнял сейчас нода аппликейшены в nx делаю для этого ну там без неста все

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

вроде нет же, давно давно когда делал, он отрабатывал до конца, ну я ему посылал команду он ее выполнял сейчас нода аппликейшены в nx делаю для этого ну там без неста все

--

## My telegram message #116266
**Time:** 27.07.2021 23:26:13 UTC+05:00
**Link:** https://t.me/nest_ru/116266

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Что делает оператор Raw в typeorm?
- не преобразует данные
- Странно у меня как раз данные после этого оператора пропадают
- Всем привет, помогите советом, хочу отделить сервис по загрузке и обработке файлов ( оптимизация, нарезка ) от основного монолита Но вот думаю как правильно сделать Первый вариант который пришел в голову - когда пользователь хочет загрузить определенный файл он делает запрос на монолит, монолит создает уникальный ключ что бы потом точно знать к чему данный файл пренадлежит ( к посту или там к аватарка пользователя ) и отправляет ссылку на сервис по загрузке файлов с данным ключом, после фронт получает данную ссылку и производить уже отправку файла по ней, сервис собственно уже оптимизирует файл и отправляет его на s3 после чего сообщает монолиту о успешной загрузке через брокер например Подскажите так вобше можно делать или есть способы полутше? Заранее спасибо

Main message:
@dimuska139 подскажи имадж для этого, я чет потерял, а сам не юзаю

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

@dimuska139 подскажи имадж для этого, я чет потерял, а сам не юзаю

--

## My telegram message #116268
**Time:** 27.07.2021 23:27:03 UTC+05:00
**Link:** https://t.me/nest_ru/116268

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Странно у меня как раз данные после этого оператора пропадают
- Всем привет, помогите советом, хочу отделить сервис по загрузке и обработке файлов ( оптимизация, нарезка ) от основного монолита Но вот думаю как правильно сделать Первый вариант который пришел в голову - когда пользователь хочет загрузить определенный файл он делает запрос на монолит, монолит создает уникальный ключ что бы потом точно знать к чему данный файл пренадлежит ( к посту или там к аватарка пользователя ) и отправляет ссылку на сервис по загрузке файлов с данным ключом, после фронт получает данную ссылку и производить уже отправку файла по ней, сервис собственно уже оптимизирует файл и отправляет его на s3 после чего сообщает монолиту о успешной загрузке через брокер например Подскажите так вобше можно делать или есть способы полутше? Заранее спасибо
- @dimuska139 подскажи имадж для этого, я чет потерял, а сам не юзаю
- MinIO?

Main message:
нарезка и оптимизация

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

нарезка и оптимизация

--

## My telegram message #116270
**Time:** 27.07.2021 23:27:13 UTC+05:00
**Link:** https://t.me/nest_ru/116270

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- @dimuska139 подскажи имадж для этого, я чет потерял, а сам не юзаю
- MinIO?
- нарезка и оптимизация
- Или по нарезке? Если нарезка, то imgproxy

Main message:
вово

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

вово

--

## My telegram message #116276
**Time:** 27.07.2021 23:30:41 UTC+05:00
**Link:** https://t.me/nest_ru/116276

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- нарезка и оптимизация
- Или по нарезке? Если нарезка, то imgproxy
- вово
- https://imgproxy.net/

Main message:
тоже в пет затащу когда будет нужда

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

тоже в пет затащу когда будет нужда

--

## My telegram message #116285
**Time:** 27.07.2021 23:41:08 UTC+05:00
**Link:** https://t.me/nest_ru/116285

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Тоесть саму загрузку оставлять в монолите и просто добавить перед s3 прокси через данный сервис ( https://imgproxy.net/ )?
- Эта штука позволяет миниатюры делать "на лету" (не нужно их самому нарезать и куда-то класть). Просто формируешь для картинки специальный урл (в который вшита ссылка на источник), этот imgproxy по урлу достаёт картинку, на лету её режет и отдаёт результат
- Та я понял это, я спрашиваю о первоначальной загрузке файла на файловое хранилище
- Ну изначально льёшь в s3 или ещё куда-то

Main message:
он проксирует сам

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

он проксирует сам

--

## My telegram message #116291
**Time:** 27.07.2021 23:42:39 UTC+05:00
**Link:** https://t.me/nest_ru/116291

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Ну изначально льёшь в s3 или ещё куда-то
- он проксирует сам
- Так я и спросил где это делать
- Если ты про загрузку, то есть у s3 presigned url. Можешь его формировать и сразу с фронта слать в s3. Я этим способом не проникся и лью сначала в API, а оно уже в s3

Main message:
да тож самое делал по фиче одной)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

да тож самое делал по фиче одной)

--

## My telegram message #116294
**Time:** 27.07.2021 23:45:27 UTC+05:00
**Link:** https://t.me/nest_ru/116294

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Так я и спросил где это делать
- Если ты про загрузку, то есть у s3 presigned url. Можешь его формировать и сразу с фронта слать в s3. Я этим способом не проникся и лью сначала в API, а оно уже в s3
- да тож самое делал по фиче одной)
- Но большие файлы по-любому надо как-то через presigned url лить. Правда всё равно хз, как тогда проверить тип файла и кинуть ошибку, если юзер не то что-то льёт

Main message:
да там есть всякие штуки, гуглил в то время

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

да там есть всякие штуки, гуглил в то время

--

## My telegram message #116675
**Time:** 29.07.2021 12:38:14 UTC+05:00
**Link:** https://t.me/nest_ru/116675

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- https://dev.to/ef/nestjs-dependency-injection-with-abstract-classes-4g65 Нашел с примерами

Main message:
простые примеры)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

простые примеры)

--

## My telegram message #117077
**Time:** 30.07.2021 15:08:57 UTC+05:00
**Link:** https://t.me/nest_ru/117077

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- https://github.com/juliandavidmr/awesome-nestjs
- Need give responsibility such the class, which have all info for accept decision. Сервис это кейс, случай, когда тебе что то надо сделать, а сколько он там юзает таблиц это другой вопрос.
- Миграции отдельно положи, они не относятся к модулю ваабще
- Да, необходимо вообще сделать как в ангуляре

Main message:
такое еще есть деление, в одном модуле только один контроллер может быть

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

такое еще есть деление, в одном модуле только один контроллер может быть

--

## My telegram message #117081
**Time:** 30.07.2021 15:10:20 UTC+05:00
**Link:** https://t.me/nest_ru/117081

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Миграции отдельно положи, они не относятся к модулю ваабще
- Да, необходимо вообще сделать как в ангуляре
- такое еще есть деление, в одном модуле только один контроллер может быть
- Так, создание клиента для деливери сервиса - это ведь уже другой респонсибилити

Main message:
сервисы просто через FeatureModule, если нужно в других модулях будут сервисы юзаться

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

сервисы просто через FeatureModule, если нужно в других модулях будут сервисы юзаться

--

## My telegram message #117084
**Time:** 30.07.2021 15:12:09 UTC+05:00
**Link:** https://t.me/nest_ru/117084

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- такое еще есть деление, в одном модуле только один контроллер может быть
- Так, создание клиента для деливери сервиса - это ведь уже другой респонсибилити
- сервисы просто через FeatureModule, если нужно в других модулях будут сервисы юзаться
- Я же могу в один модуль положить 2 сервиса?

Main message:
да

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

да

--

## My telegram message #117090
**Time:** 30.07.2021 15:12:39 UTC+05:00
**Link:** https://t.me/nest_ru/117090

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- да
- Так как они на уровне домена связаны друг с другом
- сколько угодно сервисов, когда один файл сервиса разрастается например то лучше раздиелить его.
- Один без другого ничего не делает

Main message:
дели не по доменам а по фичам

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

дели не по доменам а по фичам

--

## My telegram message #117096
**Time:** 30.07.2021 15:16:04 UTC+05:00
**Link:** https://t.me/nest_ru/117096

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- сколько угодно сервисов, когда один файл сервиса разрастается например то лучше раздиелить его.
- Один без другого ничего не делает
- дели не по доменам а по фичам
- ну ты при этом подмодули делаешь ведь еще часто, или я путаю?

Main message:
да делаю

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

да делаю

--

## My telegram message #117101
**Time:** 30.07.2021 15:17:59 UTC+05:00
**Link:** https://t.me/nest_ru/117101

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- ну ты при этом подмодули делаешь ведь еще часто, или я путаю?
- да делаю
- дада. ну контроллеры в несте все равно специфичные. там логики ноль. сервисов вот может быть несколько в модуле)
- Вот сейчас задумался, предположим в бд есть юзер и у него должен быть уникальный юзернейм стоит ли перед записью нового юзера в бд делать запрос на проверку уникальности юзернейма или же достаточно униклаьного индекста и потом ловить и обрабатывать ошибки возвращенные БД ?

Main message:
второе, так быстрее

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

второе, так быстрее

--

## My telegram message #117104
**Time:** 30.07.2021 15:20:48 UTC+05:00
**Link:** https://t.me/nest_ru/117104

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- дада. ну контроллеры в несте все равно специфичные. там логики ноль. сервисов вот может быть несколько в модуле)

Main message:
в идеальном мире, сервисы не инжектят другие сервисы в себя, их инжектят только на уровне контроллера и там связывают и вызывают связывая все, но я так писал одно время, в итоге и от такого отказался, выше причина таже

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

в идеальном мире, сервисы не инжектят другие сервисы в себя, их инжектят только на уровне контроллера и там связывают и вызывают связывая все, но я так писал одно время, в итоге и от такого отказался, выше причина таже

--

## My telegram message #117110
**Time:** 30.07.2021 15:23:56 UTC+05:00
**Link:** https://t.me/nest_ru/117110

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- и обработку таких ошибок тоже глобально в каком-нибудь космотмном ExceptionsFilter?

Main message:
сложный вопрос, есть два потхода, 1) сделать словарь {"UQ_USERS__EMAIL":"Такое мыло уже есть"} и глобально мапать сообщения об ошибках, этот словарь может в базе лежать, а может и в файлах, когда в базе то с помощью миграций добавляешь и текст ошибки и индекс например 2) локально в трай катч обрабатывать эти ошибки и тамже выкидывать еррор, ну ерроры в енам как и текст ошибок, почти как выше, ну в коде не так

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

сложный вопрос, есть два потхода, 1) сделать словарь {"UQ_USERS__EMAIL":"Такое мыло уже есть"} и глобально мапать сообщения об ошибках, этот словарь может в базе лежать, а может и в файлах, когда в базе то с помощью миграций добавляешь и текст ошибки и индекс например 2) локально в трай катч обрабатывать эти ошибки и тамже выкидывать еррор, ну ерроры в енам как и текст ошибок, почти как выше, ну в коде не так

--

## My telegram message #117114
**Time:** 30.07.2021 15:28:15 UTC+05:00
**Link:** https://t.me/nest_ru/117114

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- спасибо за советы)

Main message:
когда глобально, то ты как бы с себя ответственность снимаешь по обработке ошибок, кому то это не нравится, лучше с командой обговорить, кто то хочет все контролировать... у меня на текущей работе словари не разрешили например

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

когда глобально, то ты как бы с себя ответственность снимаешь по обработке ошибок, кому то это не нравится, лучше с командой обговорить, кто то хочет все контролировать... у меня на текущей работе словари не разрешили например

--

## My telegram message #117120
**Time:** 30.07.2021 15:33:36 UTC+05:00
**Link:** https://t.me/nest_ru/117120

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- А как думаете, если я буду сервисы инжектить в сервисы без абстракций в виде интерфейсов, на это тесты будет очень трудно писать?

Main message:
не сложно, по диай подменяется все

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

не сложно, по диай подменяется все

--

## My telegram message #117128
**Time:** 30.07.2021 15:34:56 UTC+05:00
**Link:** https://t.me/nest_ru/117128

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- какой адаптер использовал?

Main message:
https://www.npmjs.com/package/@apla/clickhouse

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

https://www.npmjs.com/package/@apla/clickhouse

--

## My telegram message #117131
**Time:** 30.07.2021 15:35:44 UTC+05:00
**Link:** https://t.me/nest_ru/117131

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Main message:
ну это не прям супер НАДО так делать, в идеале так нужно)

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

ну это не прям супер НАДО так делать, в идеале так нужно)

--

## My telegram message #117133
**Time:** 30.07.2021 15:37:12 UTC+05:00
**Link:** https://t.me/nest_ru/117133

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Replied message context:
- просто если локально обрабатывать каждую ошибку, то, мне кажется, нет большйо разницы проверять перед сописью или же обрабатывать ошибку

Main message:
когда локально ты по коду сразу видишь ситуации где че бывает, когда глобально - вообще не понятно откуда она выскочит, ну я такой думаю был довод у тех кто мне запрещал

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

когда локально ты по коду сразу видишь ситуации где че бывает, когда глобально - вообще не понятно откуда она выскочит, ну я такой думаю был довод у тех кто мне запрещал

--

## My telegram message #117136
**Time:** 30.07.2021 15:42:13 UTC+05:00
**Link:** https://t.me/nest_ru/117136

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- Спасибо за пруф.
- когда локально ты по коду сразу видишь ситуации где че бывает, когда глобально - вообще не понятно откуда она выскочит, ну я такой думаю был довод у тех кто мне запрещал
- ну мне лично такое глаза режет тоже)
- в идеале?

Main message:
все упирается в время и скилы колег, там часто получается что только ты можешь понять как именно это все работает, так как каша на уровне контроллера выходит, а когда сервис в сервис инжектишь, то мелкие кашки по бизнес логике конкретной, в сервисах частях большой логики которая в контроллере

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

все упирается в время и скилы колег, там часто получается что только ты можешь понять как именно это все работает, так как каша на уровне контроллера выходит, а когда сервис в сервис инжектишь, то мелкие кашки по бизнес логике конкретной, в сервисах частях большой логики которая в контроллере

--

## My telegram message #117155
**Time:** 30.07.2021 17:04:26 UTC+05:00
**Link:** https://t.me/nest_ru/117155

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- И запускать этот 'usecase' в контроллер, верно?
- думаю можно не ограничиваться одним сервисом на экспорт, а вот валидацию для каждого публичного метода сервиса делать нужно.
- grasp low cohesion and high coupling
- лучше делать как ты говоришь, coupling and cohesion ещё про то что в связях не должно быть ссылочных свойств и поведения т.е. методов. Как бы селиаризированные данные как json например.

Main message:
По декомпозиции очень хорошо nx помогает, граф строишь потом связей и распутываешь то что сильно связанно

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

По декомпозиции очень хорошо nx помогает, граф строишь потом связей и распутываешь то что сильно связанно

--

## My telegram message #117158
**Time:** 30.07.2021 17:07:28 UTC+05:00
**Link:** https://t.me/nest_ru/117158

### Semantic Search Content
This section is used ONLY for semantic search and understanding.

Conversation context:
- grasp low cohesion and high coupling
- лучше делать как ты говоришь, coupling and cohesion ещё про то что в связях не должно быть ссылочных свойств и поведения т.е. методов. Как бы селиаризированные данные как json например.
- По декомпозиции очень хорошо nx помогает, граф строишь потом связей и распутываешь то что сильно связанно
- Чё за пакет такой?  https://github.com/nrwl/nx он?

Main message:
Да

---

### Author Message (Answer Source)
This section MUST be used to generate the final answer.

Да

--

